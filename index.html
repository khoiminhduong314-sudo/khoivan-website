<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop B√°n ƒêi·ªán Tho·∫°i Chuy√™n Nghi·ªáp</title>
    <style>
        /* === RESET & BASE === */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: #f4f6f9;
            color: #333;
        }

        /* === HEADER & NAVIGATION === */
        header {
            background: #ffffff; /* N·ªÅn tr·∫Øng hi·ªán ƒë·∫°i */
            border-bottom: 2px solid #007bff; /* Vi·ªÅn d∆∞·ªõi m√†u xanh ch·ªß ƒë·∫°o */
            padding: 10px 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        header h1 {
            margin: 0;
            font-size: 28px;
            color: #007bff; /* M√†u xanh n·ªïi b·∫≠t */
            font-weight: 700;
        }

        .search-bar {
            flex-grow: 1;
            margin: 0 30px;
            max-width: 500px;
        }

        .search-bar input {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 25px;
            outline: none;
            font-size: 16px;
        }

        .top-buttons {
            display: flex;
            gap: 15px;
        }

        .top-buttons button {
            background: #007bff; /* M√†u xanh ch·ªß ƒë·∫°o */
            color: white;
            font-weight: 600;
            border: none;
            padding: 10px 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 2px 4px rgba(0, 123, 255, 0.3);
        }

        .top-buttons button:hover {
            background: #0056b3;
            transform: translateY(-1px);
        }

        /* Nav Menu Bar */
        nav {
            background: #007bff;
            padding: 10px 30px;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            justify-content: flex-start;
            gap: 25px;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            padding: 5px 0;
            transition: 0.3s;
        }

        nav a:hover {
            color: #ffc107;
        }


        /* === LOGIN/ADMIN FORMS (S·ª≠ d·ª•ng CSS c≈© cho ch·ª©c nƒÉng) === */
        .login-form {
            display: none;
            position: fixed;
            right: 20px;
            top: 150px; /* Di chuy·ªÉn xu·ªëng ƒë·ªÉ tr√°nh header */
            background: white;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            padding: 20px;
            width: 300px;
            z-index: 999;
            animation: fadeIn 0.3s;
            border-top: 5px solid #007bff;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            font-weight: bold;
            color: #aaa;
            cursor: pointer;
            transition: 0.2s;
        }

        .close-btn:hover {
            color: #333;
        }

        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(-10px);}
            to {opacity: 1; transform: translateY(0);}
        }

        .login-form input, #admin-panel input {
            width: 95%;
            padding: 10px;
            margin: 8px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
        }

        .login-form button {
            background: #007bff;
            transition: 0.3s;
        }
        
        .login-form button:hover {
            background: #0056b3;
        }
        /* === MAIN CONTENT === */
        main {
            display: flex;
            padding: 20px 30px;
            gap: 20px;
            min-height: 80vh;
        }
        
        /* Sidebar (Cart) */
        .sidebar {
            flex: 0 0 300px; /* C·ªë ƒë·ªãnh chi·ªÅu r·ªông */
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: sticky;
            top: 150px; /* C·ªë ƒë·ªãnh khi cu·ªôn */
            height: fit-content;
            display: none;
        }

        .sidebar h2 {
            color: #dc3545; /* M√†u ƒë·ªè cho gi·ªè h√†ng */
            border-bottom: 2px solid #dc3545;
            padding-bottom: 10px;
            margin-top: 0;
        }

        .sidebar table {
            font-size: 14px;
        }
        
        .sidebar button {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            margin-top: 15px;
            transition: 0.3s;
        }
        
        .sidebar button:hover {
            background: #c82333;
        }

        /* Product List */
        #product-list-container {
            flex: 1;
        }

        #product-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
        }

        .product {
            background: #fff;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            overflow: hidden;
        }

        .product:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .product img {
            width: 90%;
            height: 180px;
            object-fit: contain; /* Gi·ªØ t·ª∑ l·ªá ·∫£nh m√† kh√¥ng b·ªã c·∫Øt */
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #eee;
            padding: 5px;
        }

        .product h3 {
            font-size: 16px;
            color: #007bff;
            margin: 5px 0;
        }

        .product .price {
            font-size: 18px;
            color: #dc3545;
            font-weight: bold;
            margin: 8px 0;
        }
        
        .product .stock {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 10px;
        }

        .product button {
            background: #28a745; /* M√†u xanh l√° cho Mua */
            transition: 0.3s;
            padding: 10px;
        }

        .product button:hover {
            background: #1e7e34;
        }

        .product button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        
        /* Sort & Filter Panel */
        .sort-filter-bar {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .sort-filter-bar label {
            font-weight: 600;
            color: #333;
        }
        
        .sort-filter-bar select {
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ccc;
            outline: none;
            cursor: pointer;
        }

        /* Admin Panel */
        #admin-panel {
            top: 250px; /* ƒê·∫∑t panel admin th·∫•p h∆°n */
        }
        
        #admin-panel button {
            background: #007bff;
            margin-top: 10px;
            transition: 0.3s;
        }
        
        #admin-panel button:hover {
            background: #0056b3;
        }

        /* Footer */
        footer {
            background: #343a40;
            color: white;
            text-align: center;
            padding: 15px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<header>
    <div class="header-top">
        <h1>üì± Shop ƒêi·ªán Tho·∫°i KHOIVAN VIP</h1>
        <div class="search-bar">
            <input type="text" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m, h√£ng..." />
        </div>
        <div class="top-buttons">
            <button onclick="toggleForm('user')">üë§ ƒêƒÉng nh·∫≠p</button>
            <button onclick="toggleForm('admin')">üîë Admin</button>
        </div>
    </div>
</header>
<nav>
    <ul>
        <li><a href="#">Trang ch·ªß</a></li>
        <li><a href="#">iPhone</a></li>
        <li><a href="#">Samsung</a></li>
        <li><a href="#">Oppo</a></li>
        <li><a href="#">Xiaomi</a></li>
        <li><a href="#">Ph·ª• ki·ªán</a></li>
    </ul>
</nav>

<div id="user-login" class="login-form">
    <span class="close-btn" onclick="toggleForm('')">√ó</span>
    <h3>üë§ ƒêƒÉng nh·∫≠p Ng∆∞·ªùi d√πng</h3>
    <input type="text" id="user-name" placeholder="T√™n ng∆∞·ªùi d√πng" />
    <input type="password" id="user-pass" placeholder="M·∫≠t kh·∫©u" />
    <button onclick="loginUser()">ƒêƒÉng nh·∫≠p</button>
    <p style="text-align:center; margin-top:10px; font-size:14px;">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" style="color:#007bff;">ƒêƒÉng k√Ω</a></p>
</div>

<div id="admin-login" class="login-form">
    <span class="close-btn" onclick="toggleForm('')">√ó</span>
    <h3>üîë ƒêƒÉng nh·∫≠p Qu·∫£n tr·ªã vi√™n</h3>
    <input type="text" id="admin-username" placeholder="T√†i kho·∫£n" />
    <input type="password" id="admin-password" placeholder="M·∫≠t kh·∫©u" />
    <button onclick="loginAdmin()">ƒêƒÉng nh·∫≠p</button>
</div>

<div id="admin-panel" class="login-form">
    <h3>‚ûï Th√™m s·∫£n ph·∫©m</h3>
    <input type="text" id="newName" placeholder="T√™n s·∫£n ph·∫©m" />
    <input type="number" id="newPrice" placeholder="Gi√° (VND)" />
    <input type="text" id="newBrand" placeholder="H√£ng" />
    <input type="number" id="newStock" placeholder="T·ªìn kho" />
    <input type="text" id="newImg" placeholder="Link h√¨nh ·∫£nh" />
    <button onclick="addProduct()">Th√™m s·∫£n ph·∫©m</button>
</div>

<main>
    <div id="product-list-container">
        <div class="sort-filter-bar">
            <label for="sort-by">S·∫Øp x·∫øp:</label>
            <select id="sort-by" onchange="sortAndFilter()">
                <option value="default">M·ªõi nh·∫•t</option>
                <option value="price-asc">Gi√° tƒÉng d·∫ßn</option>
                <option value="price-desc">Gi√° gi·∫£m d·∫ßn</option>
                <option value="name-asc">T√™n (A-Z)</option>
            </select>
            
            <label for="filter-brand">L·ªçc theo h√£ng:</label>
            <select id="filter-brand" onchange="sortAndFilter()">
                <option value="all">T·∫•t c·∫£</option>
                <option value="Apple">Apple</option>
                <option value="Samsung">Samsung</option>
                <option value="Oppo">Oppo</option>
                <option value="Xiaomi">Xiaomi</option>
                </select>
        </div>
        
        <div id="product-list"></div>
    </div>
    
    <div class="sidebar" id="sidebar">
        <h2>üõí Gi·ªè h√†ng c·ªßa b·∫°n</h2>
        <table>
            <thead><tr><th>T√™n</th><th>Gi√°</th><th>SL</th><th>X√≥a</th></tr></thead>
            <tbody id="cart-body"></tbody>
        </table>
        <h3>T·ªïng: <span id="total">0 ‚Ç´</span></h3>
        <button onclick="checkout()">Thanh to√°n ngay</button>
    </div>
</main>

<footer>
    ¬© 2025 Shop ƒêi·ªán Tho·∫°i VIP - Powered by AI.
</footer>

<script>
    const ADMIN_USER = "admin";
    const ADMIN_PASS = "123456";
    let isAdmin = false;

    let products = [
{id:"DT01", name:"iPhone 14 Pro Max", price:30000000, brand:"Apple", stock:10, img:"https://i5.walmartimages.com/seo/Used-Apple-iPhone-14-Pro-Max-256GB-Deep-Purple-Unlocked-MQ8W3LL-A-Used-Good-Condition_cb8f75e5-1b8e-4c06-9776-0d995a314ada.88ab53492f6fe7e653033585616419b1.jpeg"},
{id:"DT02", name:"iPhone 13 Pro Max", price:27000000, brand:"Apple", stock:10, img:"https://cdn2.cellphones.com.vn/x/media/catalog/product/i/p/iphone-13-pro-max-128gb-cu-dep_3_.png"},
{id:"DT03", name:"iPhone 12", price:18000000, brand:"Apple", stock:10, img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ0Z4T-PFqYi0GSde_m8PtXMTDYpEbRYdFHzg&s"},
{id:"DT04", name:"iPhone SE 2022", price:12000000, brand:"Apple", stock:10, img:"https://www.didongmy.com/vnt_upload/product/04_2020/thumbs/(600x600)_iphone_se_2020_do.png"},
{id:"DT05", name:"iPhone 11", price:10000000, brand:"Apple", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/153856/iphone-11-trang-600x600.jpg"},
{id:"DT06", name:"Samsung Galaxy S23 Ultra", price:28000000, brand:"Samsung", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/249948/samsung-galaxy-s23-ultra-green-thumbnew-600x600.jpg"},
{id:"DT07", name:"Samsung Galaxy Z Fold 4", price:35000000, brand:"Samsung", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/250625/samsung-galaxy-z-fold4-kem-256gb-600x600.jpg"},
{id:"DT08", name:"iPhone 17 Pro Max", price:22000000, brand:"Apple", stock:10, img:"https://cdn.xtmobile.vn/vnt_upload/product/09_2025/thumbs/600_iPhone_17_Pro_cam_1_1.jpg"},
{id:"DT09", name:"Samsung Galaxy A73", price:12000000, brand:"Samsung", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/246195/samsung-galaxy-a73-1-600x600.jpg"},
{id:"DT10", name:"Samsung Galaxy S21 FE", price:15000000, brand:"Samsung", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/267211/Samsung-Galaxy-S21-FE-vang-1-2-600x600.jpg"},
{id:"DT11", name:"Oppo Reno8 Pro", price:13000000, brand:"Oppo", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/260546/oppo-reno8-pro-thumb-xanh-1-600x600.jpg"},
{id:"DT12", name:"Oppo Find X5 Pro", price:22000000, brand:"Oppo", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/250622/oppo-find-x5-pro-trang-thumb-1-600x600.jpg"},
{id:"DT13", name:"Oppo A96", price:8000000, brand:"Oppo", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/274381/oppo-a96-4g-260423-013718-600x600.jpg"},
{id:"DT14", name:"Oppo Reno7", price:10000000, brand:"Oppo", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/274721/OPPO-Reno7-4G-Thumb-cam-1-600x600.jpg"},
{id:"DT15", name:"Xiaomi 12T Pro", price:16000000, brand:"Xiaomi", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/279066/xiaomi-12t-pro-thumb-bac-1-600x600.jpg"},
{id:"DT16", name:"Xiaomi 11T", price:10000000, brand:"Xiaomi", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/248293/Xiaomi-11T-White-1-2-3-600x600.jpg"},
{id:"DT17", name:"Xiaomi Redmi Note 12 Pro", price:9000000, brand:"Xiaomi", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/299734/xiaomi-redmi-12-pro-4g-thumb-600x600.jpg"},
{id:"DT18", name:"Xiaomi Mi 11 Lite", price:7500000, brand:"Xiaomi", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/233241/xiaomi-mi-11-lite-4g-blue-600x600.jpg"},
{id:"DT19", name:"Vivo V23 5G", price:10000000, brand:"Vivo", stock:10, img:"https://cdn.tgdd.vn/Products/Images/42/264034/vivo-V23-5G-5-1-2-600x600.jpg"},
{id:"DT20", name:"Realme 9 Pro+", price:8500000, brand:"Realme", stock:10, img:"https://cdn2.cellphones.com.vn/x/media/catalog/product/9/_/9_ro_plus_3_1_1.png"}
    ];

    let cart = {};

    function formatPrice(price){ return price.toLocaleString('vi-VN') + ' ‚Ç´'; }

    /* === CH·ª®C NƒÇNG CH√çNH === */

    // ·∫®n/hi·ªán Form v√† N√∫t ƒê√≥ng
    function toggleForm(type){
        document.getElementById("user-login").style.display = "none";
        document.getElementById("admin-login").style.display = "none";
        document.getElementById("admin-panel").style.display = "none";
        if (type === "user") {
            document.getElementById("user-login").style.display = "block";
        } else if (type === "admin") {
            document.getElementById("admin-login").style.display = "block";
        }
    }

    // Admin Login
    function loginAdmin(){
        const user=document.getElementById('admin-username').value.trim();
        const pass=document.getElementById('admin-password').value.trim();
        if(user===ADMIN_USER && pass===ADMIN_PASS){
            isAdmin=true;
            alert("‚úÖ ƒêƒÉng nh·∫≠p ADMIN th√†nh c√¥ng!");
            document.getElementById("admin-login").style.display="none";
            document.getElementById("admin-panel").style.display="block";
        }else{
            alert("‚ùå Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u Admin!");
        }
    }

    // User Login
    function loginUser(){
        const name=document.getElementById('user-name').value;
        if(!name) return alert("Vui l√≤ng nh·∫≠p t√™n!");
        alert("Ch√†o m·ª´ng, " + name + "!");
        document.getElementById("user-login").style.display="none";
    }

    // Th√™m s·∫£n ph·∫©m (D√†nh cho Admin)
    function addProduct(){
        const name=document.getElementById("newName").value.trim();
        const price=parseInt(document.getElementById("newPrice").value);
        const brand=document.getElementById("newBrand").value.trim();
        const stock=parseInt(document.getElementById("newStock").value);
        const img=document.getElementById("newImg").value.trim();
        if(!name||!price||!brand||!stock||!img){alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß!");return;}
        const id="DT"+String(products.length+1).padStart(2,"0");
        products.push({id,name,price,brand,stock,img});
        sortAndFilter(); // C·∫≠p nh·∫≠t l·∫°i danh s√°ch sau khi th√™m
        alert("‚úÖ ƒê√£ th√™m s·∫£n ph·∫©m!");
    }

    // Render Products (S·ª≠ d·ª•ng h√†m m·ªõi ƒë·ªÉ h·ªó tr·ª£ s·∫Øp x·∫øp/l·ªçc)
    function renderProducts(listToRender){
        const list=document.getElementById('product-list');
        list.innerHTML=listToRender.map(p=>`
            <div class="product">
                <img src="${p.img}" alt="${p.name}">
                <h3>${p.name}</h3>
                <p class="price">${formatPrice(p.price)}</p>
                <p class="stock">T·ªìn kho: ${p.stock}</p>
                <button onclick="addToCart('${p.id}')" ${p.stock<=0?'disabled':''}>
                    ${p.stock<=0 ? 'H·∫øt h√†ng' : 'Th√™m v√†o gi·ªè'}
                </button>
            </div>
        `).join('');
    }

    // S·∫Øp x·∫øp v√† L·ªçc s·∫£n ph·∫©m
    function sortAndFilter() {
        let filteredProducts = [...products]; // T·∫°o b·∫£n sao

        // L·ªçc theo h√£ng
        const brandFilter = document.getElementById('filter-brand').value;
        if (brandFilter !== 'all') {
            filteredProducts = filteredProducts.filter(p => p.brand === brandFilter);
        }

        // S·∫Øp x·∫øp
        const sortBy = document.getElementById('sort-by').value;
        switch (sortBy) {
            case 'price-asc':
                filteredProducts.sort((a, b) => a.price - b.price);
                break;
            case 'price-desc':
                filteredProducts.sort((a, b) => b.price - a.price);
                break;
            case 'name-asc':
                filteredProducts.sort((a, b) => a.name.localeCompare(b.name, 'vi'));
                break;
            case 'default':
            default:
                // Gi·ªØ nguy√™n th·ª© t·ª± ban ƒë·∫ßu (ho·∫∑c s·∫Øp x·∫øp theo ID)
                filteredProducts.sort((a, b) => a.id.localeCompare(b.id)); 
                break;
        }

        renderProducts(filteredProducts);
    }
    
    sortAndFilter(); // G·ªçi l·∫ßn ƒë·∫ßu ƒë·ªÉ hi·ªÉn th·ªã s·∫£n ph·∫©m

    /* === CART & CHECKOUT === */
    function addToCart(id){
        const p=products.find(x=>x.id===id);
        if(p.stock<=0){alert("H·∫øt h√†ng!");return;}
        cart[id]=(cart[id]||0)+1;
        if(cart[id]>p.stock){cart[id]=p.stock;alert(`Ch·ªâ c√≤n ${p.stock} s·∫£n ph·∫©m!`);}
        renderCart();
    }
    
    function renderCart(){
        const body=document.getElementById('cart-body');
        body.innerHTML="";
        let total=0;
        for(const id in cart){
            const p=products.find(x=>x.id===id);
            total+=p.price*cart[id];
            body.innerHTML+=`<tr>
                <td style="text-align:left;">${p.name.substring(0,15)}...</td>
                <td>${formatPrice(p.price)}</td>
                <td>${cart[id]}</td>
                <td><button onclick="removeItem('${id}')" style="background: none; border: none; color: #dc3545; font-size: 16px; padding: 0;">‚ùå</button></td>
            </tr>`;
        }
        document.getElementById('total').textContent=formatPrice(total);
        if (Object.keys(cart).length > 0) {
            document.getElementById('sidebar').style.display = "block";
        } else {
            document.getElementById('sidebar').style.display = "none";
        }
    }
    function removeItem(id){delete cart[id];renderCart(); sortAndFilter();}

    // Ch·ª©c nƒÉng In H√≥a ƒë∆°n
    function printInvoice(cartDetails, total) {
        let invoiceContent = `
            <!DOCTYPE html>
            <html lang="vi">
            <head>
                <title>H√≥a ƒë∆°n Thanh to√°n</title>
                <style>
                    body { font-family: Tahoma, sans-serif; padding: 20px; }
                    .invoice { width: 600px; margin: 0 auto; border: 1px solid #ccc; padding: 30px; }
                    h2 { text-align: center; color: #007bff; }
                    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
                    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    th { background-color: #f2f2f2; }
                    .total-row td { font-weight: bold; border-top: 2px solid #000; }
                    .center { text-align: center; margin-top: 30px; }
                </style>
            </head>
            <body>
                <div class="invoice">
                    <h2>üßæ H√ìA ƒê∆†N MUA H√ÄNG</h2>
                    <p><strong>Ng√†y:</strong> ${new Date().toLocaleDateString('vi-VN')}</p>
                    <p><strong>C·ª≠a h√†ng:</strong> Shop ƒêi·ªán Tho·∫°i VIP</p>
                    <table>
                        <thead>
                            <tr>
                                <th>T√™n s·∫£n ph·∫©m</th>
                                <th style="text-align: right;">Gi√°</th>
                                <th style="text-align: center;">S·ªë l∆∞·ª£ng</th>
                                <th style="text-align: right;">Th√†nh ti·ªÅn</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${cartDetails}
                            <tr class="total-row">
                                <td colspan="3" style="text-align: right;">T·ªîNG C·ªòNG</td>
                                <td style="text-align: right;">${formatPrice(total)}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="center">
                        <p>C·∫£m ∆°n qu√Ω kh√°ch ƒë√£ mua h√†ng!</p>
                    </div>
                </div>
            </body>
            </html>
        `;

        const win = window.open('', 'Print', 'height=600,width=800');
        win.document.write(invoiceContent);
        win.document.close();
        win.print();
    }


    // Checkout
    function checkout() {
        if (Object.keys(cart).length === 0) {
            alert("Gi·ªè h√†ng tr·ªëng! Vui l√≤ng th√™m s·∫£n ph·∫©m.");
            return;
        }

        let total = 0;
        let cartDetailsHTML = ""; 

        for (const id in cart) {
            const p = products.find(x => x.id === id);
            const quantity = cart[id];
            const subTotal = p.price * quantity;

            p.stock -= quantity; // C·∫≠p nh·∫≠t t·ªìn kho
            
            cartDetailsHTML += `
                <tr>
                    <td>${p.name}</td>
                    <td style="text-align: right;">${formatPrice(p.price)}</td>
                    <td style="text-align: center;">${quantity}</td>
                    <td style="text-align: right;">${formatPrice(subTotal)}</td>
                </tr>
            `;

            total += subTotal;
        }

        printInvoice(cartDetailsHTML, total); // Xu·∫•t h√≥a ƒë∆°n
        alert("‚úÖ ƒê·∫∑t h√†ng th√†nh c√¥ng! Vui l√≤ng ki·ªÉm tra h√≥a ƒë∆°n.");
        
        cart = {}; // X√≥a gi·ªè h√†ng
        renderCart();
        sortAndFilter(); // C·∫≠p nh·∫≠t l·∫°i danh s√°ch ƒë·ªÉ th·∫•y thay ƒë·ªïi t·ªìn kho
    }
</script>
</body>
</html>


